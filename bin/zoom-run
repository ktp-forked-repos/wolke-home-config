#!/usr/bin/perl
use strict;
use warnings;

my $meetingId = "104772684";

sub main(@){
  my $pgrep = `pgrep --exact zoom`;
  my @pids = $pgrep =~ /\d+/g;
  for my $pid(@pids){
    print "--$pid--\n";
  }

  if(@pids == 0){
    my $url = "zoommtg://zoom.us/join?action=join&confno=$meetingId";
    system "zoom '$url' &";
  }else{
    for my $pid(@pids){
      system "kill", "-9", $pid;
    }
  }
}

&main(@ARGV);
